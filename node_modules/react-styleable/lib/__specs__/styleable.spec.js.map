{"version":3,"sources":["../../src/__specs__/styleable.spec.js"],"names":[],"mappings":";;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;;;AAEA,IAAM,MAAM;AACV,WAAS;AADC,CAAZ;;AAIA,SAAS,SAAT,CAAmB,GAAnB,EAAwB;AAAA;;AAAA,MAEhB,OAFgB,WACrB,yBAAU,GAAV,CADqB;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,+BAMX;AACP,eACE;AAAA;UAAA,EAAK,WAAW,KAAK,KAAL,CAAW,GAAX,CAAe,OAA/B,EAAwC,KAAI,SAA5C;UAAA;UAA+D,KAAK,KAAL,CAAW;AAA1E,SADF;AAGD;AAVmB;;AAAA;AAAA,IAEA,gBAAM,SAFN,WAGb,YAHa,GAGE;AACpB,cAAU;AADU,GAHF;;;AAatB,SAAO,OAAP;AACD;;AAED,SAAS,yBAAT,GAAqC;AAAA;;AAAA,MAE7B,OAF6B,YAClC,yBAAU,GAAV,CADkC;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,+BAMxB;AACP,eACE;AAAA;UAAA,EAAK,WAAW,KAAK,KAAL,CAAW,GAAX,CAAe,OAA/B,EAAwC,KAAI,SAA5C;UAAA;UAAmE,KAAK,KAAL,CAAW;AAA9E,SADF;AAGD;AAVgC;;AAAA;AAAA,IAEb,gBAAM,SAFO,WAG1B,SAH0B,GAGd;AACjB,cAAU,gBAAM,SAAN,CAAgB,MAAhB,CAAuB;AADhB,GAHc;;;AAanC,SAAO,OAAP;AACD;;AAED,SAAS,iBAAT,CAA2B,GAA3B,EAAgC;AAC9B,WAAS,OAAT,CAAiB,KAAjB,EAAwB;AACtB,WAAO;AAAA;MAAA,EAAK,WAAW,MAAM,GAAN,CAAU,OAA1B;MAAA;MAA4C,MAAM;AAAlD,KAAP;AACD;AACD,UAAQ,YAAR,GAAuB;AACrB,cAAU;AADW,GAAvB;;AAIA,SAAO,yBAAU,GAAV,EAAe,OAAf,CAAP;AACD;;AAED,SAAS,iCAAT,GAA6C;AAC3C,WAAS,OAAT,CAAiB,KAAjB,EAAwB;AACtB,WAAO;AAAA;MAAA,EAAK,WAAW,MAAM,GAAN,CAAU,OAA1B;MAAA;MAAgD,MAAM;AAAtD,KAAP;AACD;AACD,UAAQ,SAAR,GAAoB;AAClB,cAAU,gBAAM,SAAN,CAAgB,MAAhB,CAAuB;AADf,GAApB;;AAIA,SAAO,yBAAU,GAAV,EAAe,OAAf,CAAP;AACD;;AAED,SAAS,WAAT,EAAsB,YAAM;;AAE1B,KAAG,+CAAH,EAAoD,YAAM;AACxD,QAAM,oBAAoB,EAA1B;AACA,QAAM,UAAU,WAAhB;AACA,QAAM,YAAY,+BAAU,kBAAV,CAA6B,8BAAC,OAAD,OAA7B,CAAlB;AACA,cAAU,KAAV,CAAgB,GAAhB,CAAoB,MAApB,CAA2B,GAA3B,CAA+B,iBAA/B;AACD,GALD;;AAOA,WAAS,yBAAT,EAAoC,YAAM;;AAExC,OAAG,wBAAH,EAA6B,YAAM;AACjC,OAAC,YAAM;AACL,YAAM,UAAU,UAAU,WAAV,CAAhB;AACA,uCAAU,kBAAV,CAA6B,8BAAC,OAAD,OAA7B;AACD,OAHD,EAGG,MAHH,CAGU,KAHV,CAGgB,mBAHhB;AAID,KALD;;AAOA,OAAG,sBAAH,EAA2B,YAAM;AAC/B,OAAC,YAAM;AACL,YAAM,UAAU,UAAU,CAAC,KAAD,EAAQ,OAAR,CAAV,CAAhB;AACA,uCAAU,kBAAV,CAA6B,8BAAC,OAAD,OAA7B;AACD,OAHD,EAGG,MAHH,CAGU,KAHV,CAGgB,mBAHhB;AAID,KALD;AAOD,GAhBD;;AAkBA,KAAG,oCAAH,EAAyC,YAAM;AAC7C,QAAM,UAAU,WAAhB;AACA,QAAM,YAAY,+BAAU,kBAAV,CAA6B,8BAAC,OAAD,OAA7B,CAAlB;AACA,cAAU,IAAV,CAAe,MAAf,CAAsB,GAAtB,CAA0B,IAA1B,CAA+B,QAA/B,CAAwC,SAAxC;AACA,cAAU,IAAV,CAAe,MAAf,CAAsB,IAAtB,CAA2B,QAA3B,CAAoC,SAApC;AACD,GALD;;AAOA,WAAS,iCAAT,EAA4C,YAAM;;AAEhD,OAAG,wDAAH,EAA6D,UAAC,IAAD,EAAU;AACrE,UAAM,UAAU,EAAE,SAAS,MAAX,EAAhB;AACA,UAAM,cAAc,EAAE,gBAAgB,aAAlB,EAApB;AACA,UAAM,UAAU,UAAU,OAAV,CAAhB;AACA,UAAI;AACF,uCAAU,kBAAV,CAA6B,8BAAC,OAAD,IAAS,KAAK,WAAd,GAA7B;AACD,OAFD,CAEE,OAAO,CAAP,EAAU;;;;;;;;;AASV,UAAE,OAAF,CAAU,MAAV,CAAiB,KAAjB,CAAuB,wBAAvB;AACA;AACD;AACF,KAlBD;AAoBD,GAtBD;;AAwBA,KAAG,+BAAH,EAAoC,YAAM;AACxC,QAAM,UAAU,aAAhB;AACA,QAAM,UAAU,EAAE,SAAS,MAAX,EAAhB;AACA,QAAM,cAAc,EAAE,SAAS,OAAX,EAApB;AACA,QAAM,UAAU,UAAU,OAAV,CAAhB;AACA,QAAI,YAAY,+BAAU,kBAAV,CAA6B,8BAAC,OAAD,IAAS,KAAK,WAAd,GAA7B,CAAhB;AACA,cAAU,KAAV,CAAgB,GAAhB,CAAoB,OAApB,CAA4B,MAA5B,CAAmC,GAAnC,CAAuC,OAAvC;AACD,GAPD;;AASA,KAAG,gCAAH,EAAqC,YAAM;AACzC,QAAM,UAAU,WAAhB;AACA,YAAQ,YAAR,CAAqB,QAArB,CAA8B,MAA9B,CAAqC,KAArC;AACA,QAAM,YAAY,+BAAU,kBAAV,CAA6B,8BAAC,OAAD,OAA7B,CAAlB;AACA,cAAU,KAAV,CAAgB,QAAhB,CAAyB,MAAzB,CAAgC,GAAhC,CAAoC,YAApC;AACD,GALD;;AAOA,KAAG,6BAAH,EAAkC,YAAM;AACtC,QAAM,UAAU,2BAAhB;AACA,YAAQ,SAAR,CAAkB,QAAlB,CAA2B,MAA3B,CAAkC,KAAlC;AACD,GAHD;;AAKA,WAAS,0BAAT,EAAqC,YAAM;;AAEzC,OAAG,8BAAH,EAAmC,YAAM;AACvC,UAAM,MAAM,EAAE,SAAS,SAAX,EAAZ;AACA,UAAM,UAAU,kBAAkB,GAAlB,CAAhB;AACA,UAAM,YAAY,+BAAU,kBAAV,CAA6B;AAAA;QAAA;QAAK,8BAAC,OAAD;AAAL,OAA7B,CAAlB;AACA,yBAAS,WAAT,CAAqB,SAArB,EAAgC,QAAhC,CAAyC,CAAzC,EAA4C,SAA5C,CAAsD,MAAtD,CAA6D,GAA7D,CAAiE,IAAI,OAArE;AACD,KALD;;AAOA,OAAG,oCAAH,EAAyC,YAAM;AAC7C,UAAM,UAAU,aAAhB;AACA,UAAM,UAAU,EAAE,SAAS,MAAX,EAAhB;AACA,UAAM,cAAc,EAAE,SAAS,OAAX,EAApB;AACA,UAAM,UAAU,kBAAkB,OAAlB,CAAhB;AACA,UAAM,YAAY,+BAAU,kBAAV,CAA6B;AAAA;QAAA;QAAK,8BAAC,OAAD,IAAS,KAAK,WAAd;AAAL,OAA7B,CAAlB;AACA,yBAAS,WAAT,CAAqB,SAArB,EAAgC,QAAhC,CAAyC,CAAzC,EAA4C,SAA5C,CAAsD,MAAtD,CAA6D,GAA7D,CAAiE,OAAjE;AACD,KAPD;;AASA,OAAG,gCAAH,EAAqC,YAAM;AACzC,UAAM,UAAU,mBAAhB;AACA,cAAQ,YAAR,CAAqB,QAArB,CAA8B,MAA9B,CAAqC,KAArC;AACA,UAAM,YAAY,+BAAU,kBAAV,CAA6B;AAAA;QAAA;QAAK,8BAAC,OAAD;AAAL,OAA7B,CAAlB;AACA,yBAAS,WAAT,CAAqB,SAArB,EAAgC,QAAhC,CAAyC,CAAzC,EAA4C,WAA5C,CAAwD,MAAxD,CAA+D,GAA/D,CAAmE,oBAAnE;AACD,KALD;;AAOA,OAAG,6BAAH,EAAkC,YAAM;AACtC,UAAM,UAAU,mCAAhB;;;;;;AAMA,cAAQ,SAAR,CAAkB,QAAlB,CAA2B,MAA3B,CAAkC,KAAlC;AACD,KARD;AASD,GAlCD;AAoCD,CAnHD","file":"styleable.spec.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport TestUtils from 'react-addons-test-utils'\n\nimport styleable from '../styleable'\n\nconst css = {\n  content: 'someHashFromALocalCssModule'\n}\n\nfunction mkFixture(css) {\n  @styleable(css)\n  class Subject extends React.Component {\n    static defaultProps = {\n      aDefault: 'still here'\n    };\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">Content {this.props.aDefault}</div>\n      )\n    }\n  }\n\n  return Subject\n}\n\nfunction mkFixtureWithReqPropTypes() {\n  @styleable(css)\n  class Subject extends React.Component {\n    static propTypes = {\n      aReqProp: React.PropTypes.string.isRequired\n    };\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">Req content {this.props.aReqProp}</div>\n      )\n    }\n  }\n\n  return Subject\n}\n\nfunction mkFunctionFixture(css) {\n  function subject(props) {\n    return <div className={props.css.content}>Content {props.aDefault}</div>\n  }\n  subject.defaultProps = {\n    aDefault: 'still here'\n  }\n\n  return styleable(css)(subject)\n}\n\nfunction mkFunctionFixtureWithReqPropTypes() {\n  function subject(props) {\n    return <div className={props.css.content}>Req content {props.aReqProp}</div>\n  }\n  subject.propTypes = {\n    aReqProp: React.PropTypes.string.isRequired\n  }\n\n  return styleable(css)(subject)\n}\n\ndescribe('styleable', () => {\n\n  it('creates a default stylesheet if none supplied', () => {\n    const defaultStylesheet = {}\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.css.should.eql(defaultStylesheet)\n  })\n\n  describe('with invalid stylesheet', () => {\n\n    it('rejects css as strings', () => {\n      (() => {\n        const Subject = mkFixture('nonCssObj')\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n\n    it('rejects css as array', () => {\n      (() => {\n        const Subject = mkFixture(['css', 'stuff'])\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n\n  })\n\n  it('wraps the component in a component', () => {\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.refs.should.not.have.property('content')\n    component.refs.should.have.property('wrapped')\n  })\n\n  describe('with invalid override selectors', () => {\n\n    it('rejects styles that won\\'t be used (superset override)', (done) => {\n      const origCss = { content: 'hash' }\n      const overrideCss = { unusedSelector: 'anotherHash' }\n      const Subject = mkFixture(origCss)\n      try {\n        TestUtils.renderIntoDocument(<Subject css={overrideCss}/>)\n      } catch (e) {\n        /*\n          Using this instead of (() => {}).should.throw()\n          Because I was getting this error:\n           TypeError: Cannot call a class as a function\n             at _classCallCheck (lib/styleable.js:23:34)\n             at CssStyleComponent (lib/styleable.js:31:35)\n             at Context.<anonymous> (lib/__specs__/styleable.spec.js:64:41)\n         */\n        e.message.should.match(/provide only overrides/)\n        done()\n      }\n    })\n\n  })\n\n  it('overrides original stylesheet', () => {\n    const newHash = 'anotherHash'\n    const origCss = { content: 'hash' }\n    const overrideCss = { content: newHash }\n    const Subject = mkFixture(origCss)\n    var component = TestUtils.renderIntoDocument(<Subject css={overrideCss}/>)\n    component.props.css.content.should.eql(newHash )\n  })\n\n  it('lets defaultProps pass through', () => {\n    const Subject = mkFixture()\n    Subject.defaultProps.aDefault.should.exist\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.aDefault.should.eql('still here')\n  })\n\n  it('lets propTypes pass through', () => {\n    const Subject = mkFixtureWithReqPropTypes()\n    Subject.propTypes.aReqProp.should.exist\n  })\n\n  describe('with stateless functions', () => {\n\n    it('makes the css prop available', () => {\n      const css = { content: 'cssHash' }\n      const Subject = mkFunctionFixture(css)\n      const component = TestUtils.renderIntoDocument(<div><Subject /></div>)\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(css.content)\n    })\n\n    it('allows overrides to the stylesheet', () => {\n      const newHash = 'anotherHash'\n      const origCss = { content: 'hash' }\n      const overrideCss = { content: newHash }\n      const Subject = mkFunctionFixture(origCss)\n      const component = TestUtils.renderIntoDocument(<div><Subject css={overrideCss} /></div>)\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(newHash)\n    })\n\n    it('lets defaultProps pass through', () => {\n      const Subject = mkFunctionFixture()\n      Subject.defaultProps.aDefault.should.exist\n      const component = TestUtils.renderIntoDocument(<div><Subject /></div>)\n      ReactDOM.findDOMNode(component).children[0].textContent.should.eql('Content still here')\n    })\n\n    it('lets propTypes pass through', () => {\n      const Subject = mkFunctionFixtureWithReqPropTypes()\n      /*\n        Not sure how to really test the real problem where warnings aren't\n        happening when a child component has been styleable'd. This at least\n        tests the fix for the real problem.\n      */\n      Subject.propTypes.aReqProp.should.exist\n    })\n  })\n\n})\n"]}